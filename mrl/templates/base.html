{% load static wagtailcore_tags wagtailuserbar navigation_tags%}
<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Basic -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>
            {% block title %}
            {% if page.seo_title %}{{ page.seo_title }}{% else %}{{ page.title }}{% endif %}
            {% endblock %}
            {% block title_suffix %}
            {% wagtail_site as current_site %}
            {% if current_site and current_site.site_name %}- {{ current_site.site_name }}{% endif %}
            {% endblock %}
        </title>
        <meta name="keywords" content="WebSite Template"/>
        <meta name="description" content="Porto - Multipurpose Website Template">
        <meta name="author" content="okler.net">
        <!-- Favicon -->
        <link rel="shortcut icon" href="{% static 'img/favicon.ico' %}" type="image/x-icon"/>

        <link rel="apple-touch-icon" href="img/apple-touch-icon.png">

        <!-- Mobile Metas -->
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, shrink-to-fit=no">

        {% if page.search_description %}
        <meta name="description" content="{{ page.search_description }}" />
        {% endif %}
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        {# Force all links in the live preview panel to be opened in a new tab #}
        {% if request.in_preview_panel %}
        <base target="_blank">
        {% endif %}

        <!-- Web Fonts  -->
        <link id="googleFonts"
          href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800%7CShadows+Into+Light&display=swap"
          rel="stylesheet" type="text/css">
        {# Global stylesheets #}
        <!-- Vendor CSS -->
        <link rel="stylesheet" href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}">
        <link rel="stylesheet" href="{% static 'vendor/fontawesome-free/css/all.min.css' %}">
        <link rel="stylesheet" href="{% static 'vendor/animate/animate.compat.css' %}">
        <link rel="stylesheet" href="{% static 'vendor/simple-line-icons/css/simple-line-icons.min.css' %}">
        <link rel="stylesheet" href="{% static 'vendor/owl.carousel/assets/owl.carousel.min.css' %}">
        <link rel="stylesheet" href="{% static 'vendor/owl.carousel/assets/owl.theme.default.min.css' %}">
        <link rel="stylesheet" href="{% static 'vendor/magnific-popup/magnific-popup.min.css' %}">

        <!-- Theme CSS -->
        <link rel="stylesheet" href="{% static 'css/theme.css' %}">
        <link rel="stylesheet" href="{% static 'css/theme-elements.css' %}">
        <link rel="stylesheet" href="{% static 'css/theme-blog.css' %}">
        <link rel="stylesheet" href="{% static 'css/theme-shop.css' %}">

         <!-- Demo CSS -->
        <link rel="stylesheet" href="{% static 'css/demos/demo-transportation-logistic.css' %}">

        <!-- Skin CSS -->
        <link id="skinCSS" rel="stylesheet" href="{% static 'css/skins/skin-transportation-logistic.css' %}">

        <!-- Theme Custom CSS -->
        <link rel="stylesheet" href="{% static 'css/custom.css' %}">

        {% block extra_css %}
        {# Override this in templates to add extra stylesheets #}
        {% endblock %}
    </head>

    <body data-plugin-page-transition>
        {% wagtailuserbar %}

        <header id="header" class="header-effect-reveal" data-plugin-options="{'stickyEnabled': true, 'stickyEffect': 'reveal', 'stickyEnableOnBoxed': true, 'stickyEnableOnMobile': false, 'stickyChangeLogo': false, 'stickyStartAt': 200, 'stickySetTop': '-44px'}">
        <div class="header-body border-0 border-bottom-light">
            <div class="header-container container-fluid p-0">
                <div class="header-row">
                    <div class="header-column header-column-border-right flex-grow-0 d-sticky-header-active-none">
                        <div class="header-row">
                            <div class="header-logo p-relative top-1 m-0">
                                <a href="/">
                                    <img alt="Porto" width="320" height="150"
                                         src="{% static 'img/logo.png' %}">
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="header-column">
                        <div class="border-bottom-light w-100">
                            <div class="hstack gap-4 px-4 py-2 font-weight-semi-bold d-none d-lg-flex">
                                <div class="d-none d-lg-inline-block ps-1"><a
                                        class="text-color-default text-color-hover-primary text-2"
                                        href="#">02030869073</a></div>
                                <div class="vr d-lg-inline-block opacity-2 d-none d-xl-inline-block"></div>
                                <div class="d-none d-xl-inline-block"><a
                                        class="text-color-default text-color-hover-primary text-2" href="#">cargo@greanleafservices.co.uk</a>
                                </div>
                                <div class="vr opacity-2 d-none d-xl-inline-block"></div>
                                <div class="d-none d-xl-inline-block"><span
                                        class="text-color-default text-color-hover-primary text-2">Mon — Sat: 9AM — 5PM</span>
                                </div>
                                <div class="ms-auto d-none d-lg-inline-block">
                                    <ul class="nav nav-pills">
                                        <li class="nav-item dropdown">
                                            <a class="nav-link text-2 p-0 text-color-default" href="#" role="button"
                                               id="dropdownLanguage" data-bs-toggle="dropdown" aria-haspopup="true"
                                               aria-expanded="false">
                                                english
                                                <i class="fas fa-angle-down"></i>
                                            </a>
                                            <div class="dropdown-menu dropdown-menu-end text-2"
                                                 aria-labelledby="dropdownLanguage">
                                                <a class="dropdown-item text-color-default" href="#">English</a>
                                                <a class="dropdown-item text-color-default" href="#">Español</a>
                                                <a class="dropdown-item text-color-default" href="#">Française</a>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                <div class="vr opacity-2 d-none d-lg-inline-block"></div>
                                <div class="d-none d-lg-inline-block">
                                    <ul class="nav nav-pills me-1">
                                        {% with facebook_url=settings.base.NavigationSettings.facebook_url x_url=settings.base.NavigationSettings.x_url instagram_url=settings.base.NavigationSettings.instagram_url linkedin_url=settings.base.NavigationSettings.linkedin_url %}
                                            {% if facebook_url %}
                                            <li class="nav-item pe-2 mx-1">
                                                <a href="{{ facebook_url }}" target="_blank" title="Facebook"
                                                   class="text-color-default text-color-hover-primary text-2"><i
                                                        class="fab fa-facebook-f"></i></a>
                                            </li>
                                            {% endif %}
                                            {% if x_url %}
                                            <li class="nav-item px-2 mx-1">
                                                <a href="{{ x_url }}" target="_blank" title="X"
                                                   class="text-color-default text-color-hover-primary text-2"><i
                                                        class="fab fa-x-twitter"></i></a>
                                            </li>
                                            {% endif %}
                                            {% if instagram_url %}
                                            <li class="nav-item px-2 mx-1">
                                                <a href="{{ instagram_url }}" target="_blank" title="Instagram"
                                                   class="text-color-default text-color-hover-primary text-2"><i
                                                        class="fab fa-instagram"></i></a>
                                            </li>
                                            {% endif %}
                                            {% if linkedin_url %}
                                            <li class="nav-item px-2 mx-1 me-0 pe-0">
                                                <a href="{{ linkedin_url }}" target="_blank" title="Linkedin"
                                                   class="text-color-default text-color-hover-primary text-2"><i
                                                        class="fab fa-linkedin-in"></i></a>
                                            </li>
                                            {% endif %}
                                        {% endwith %}
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="header-row h-100">
                            <div class="hstack h-100 w-100">
                                <div class="h-100 w-100 w-xl-auto">
                                    <div class="header-nav header-nav-links h-100 justify-content-end justify-content-lg-start me-4 me-lg-0 ms-lg-3">
                                        <div class="header-nav-main header-nav-main-square header-nav-main-dropdown-no-borders header-nav-main-text-capitalize header-nav-main-text-size-4 header-nav-main-arrows header-nav-main-full-width-mega-menu header-nav-main-mega-menu-bg-hover header-nav-main-effect-5">
                                            {% get_site_root as site_root %}
                                            <nav class="collapse">
                                                <ul class="nav nav-pills" id="mainNav">
                                                    <li class="dropdown">
                                                        <a href="{% pageurl site_root %}" class="nav-link active"> Home</a>
                                                    </li>
                                                    {% for menuitem in site_root.get_children.live.in_menu %}
                                                    <li>
                                                        <a class="nav-link"
                                                           href="{% pageurl menuitem %}">
                                                            {{ menuitem.title }}
                                                        </a>
                                                    </li>
                                                    {% endfor %}

                                                </ul>
                                            </nav>
                                        </div>
                                        <button class="btn header-btn-collapse-nav" data-bs-toggle="collapse"
                                                data-bs-target=".header-nav-main nav">
                                            <i class="fas fa-bars"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="vr opacity-2 ms-auto d-none d-xl-inline-block"></div>
                                <div class="px-4 d-none d-xxl-inline-block ws-nowrap">
                                    <a href="#" class="btn border-0 px-4 py-2 line-height-9 btn-tertiary me-2" data-bs-toggle="modal" data-bs-target="#cargoCalculatorModal">Request
                                        Rate</a>
                                    <a href="#" class="btn border-0 px-4 py-2 line-height-9 btn-primary">Track Order</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
        <div role="main" class="main">
             {% block content %}{% endblock %}
        </div>
        <footer id="footer" class="position-relative top-1 bg-tertiary border-top-0">

        <div class="container py-5">
            <div class="row pt-5">
                <div class="col-lg-4">
                    <a href="demo-transportation-logistic.html" class="text-decoration-none">
                        <img src="/static/img/logogls1.png" class="img-fluid mb-4" width="88">
                    </a>
                    <p class="text-3-5 pe-lg-2">Here we make magic by delivering smiles to our customers one cargo at a time. </p>
                    <ul class="list list-unstyled">
                        <li class="d-flex align-items-center mb-4">
                            <a href="mailto:cargo@greanleafservices.co.uk"
                               class="d-inline-flex align-items-center text-decoration-none text-color-light text-color-hover-primary font-weight-semibold text-4-5">cargo@greanleafservices.co.uk</a>
                        </li>
                        <li class="d-flex align-items-center mb-4">
                            <a href="tel:02030869073"
                               class="d-inline-flex align-items-center text-decoration-none text-color-light text-color-hover-primary font-weight-semibold text-4-5">02030869073</a>
                        </li>
                    </ul>
                    <div class="d-none d-xxl-inline-block ws-nowrap">
                        <a href="#" class="btn border-0 px-4 py-2 line-height-9 btn-light text-color-dark me-2" data-bs-toggle="modal" data-bs-target="#cargoCalculatorModal">Request
                            Rate</a>
                        <a href="#" class="btn border-0 px-4 py-2 line-height-9 btn-primary">Track Order</a>
                    </div>
                </div>
                <div class="col-lg-8">
                    <div class="row mb-5">
                        <div class="col-lg-6 mb-4 mb-lg-0">
                            <h4 class="text-color-light font-weight-semibold mb-3">Navigation</h4>
                            <ul class="list list-unstyled columns-lg-2">
                                <li><a href="{% pageurl site_root %}" class="text-color-grey text-color-hover-primary">Home</a></li>
                                {% for menuitem in site_root.get_children.live.in_menu %}
                                <li><a href="{% pageurl menuitem %}" class="text-color-grey text-color-hover-primary">{{ menuitem.title }}</a></li>
                                {% endfor %}
                            </ul>
                        </div>
                        <div class="col-lg-6">
                            <h4 class="text-color-light font-weight-semibold mb-3">Useful Links</h4>
                            <ul class="list list-unstyled columns-lg-2">
                                <li><a href="#" class="text-color-grey text-color-hover-primary">Registered Shippers</a>
                                </li>
                                <li><a href="#" class="text-color-grey text-color-hover-primary">Local Pickup</a></li>
                                <li><a href="#" class="text-color-grey text-color-hover-primary">Local Delivery</a></li>
                                <li><a href="#" class="text-color-grey text-color-hover-primary">Freight
                                    Consolidation</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col p-relative bottom-3">
                            <div class="alert alert-success d-none" id="newsletterSuccess">
                                <strong>Success!</strong> You've been added to our email list.
                            </div>
                            <div class="alert alert-danger d-none" id="newsletterError"></div>
                            <div class="d-flex flex-column flex-lg-row align-items-start align-items-lg-center">
                                <h4 class="text-color-light ws-nowrap me-3 mb-3 mb-lg-0">Subscribe to Newsletter:</h4>
                                <form id="newsletterForm" class="form-style-3 w-100"
                                      action="php/newsletter-subscribe.php" method="POST">
                                    <div class="d-flex">
                                        <input class="form-control box-shadow-none" placeholder="Email Address"
                                               name="newsletterEmail" id="newsletterEmail" type="text"/>
                                        <button class="btn btn-primary custom-form-control-newsletter-btn btn-px-3 btn-py-2 font-weight-bold"
                                                type="submit">
                                            GO
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-copyright bg-transparent">
            <div class="container">
                <hr class="bg-color-light opacity-1">
                <div class="row">
                    <div class="col mt-4 mb-4 pb-4">
                        <p class="text-center text-3 mb-0 text-color-grey">Greanleaf Transportation & Logistic © 2025. All Rights Reserved | Developed by Merial IT Services</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

        <!-- Vendor -->
        <script src="{% static 'vendor/plugins/js/plugins.min.js' %}"></script>
        <!-- Theme Base, Components and Settings -->
        <script src="{% static 'js/theme.js' %}"></script>

        <!-- Demo -->
        <script src="{% static 'js/demos/demo-transportation-logistic.js' %}"></script>

        <!-- Current Page Vendor and Views -->
        <script src="{% static 'js/views/view.contact.js' %}"></script>

        <!-- Theme Custom -->
        <script src="{% static 'js/custom.js' %}"></script>

        <!-- Theme Initialization Files -->
        <script src="{% static 'js/theme.init.js' %}"></script>

        {% block extra_js %}
        {# Override this in templates to add extra javascript #}
        {% endblock %}
 <!-- Request Rate Modal (Cargo Calculator) -->
<div class="modal fade" id="cargoCalculatorModal" tabindex="-1" aria-labelledby="cargoCalculatorLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="cargoCalculatorLabel">Cargo Calculator</h5>
                <button type="button" class="btn-close text-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="cargoForm" onsubmit="calculateCargo(event)" action="https://usebasin.com/f/42e4e893bc56" method="POST">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="firstname" class="form-label font-weight-bold">First Name:</label>
                            <input type="text" id="firstname" name="firstname" class="form-control" placeholder="Enter your first name" pattern="[A-Za-z\s]+" title="Only letters and spaces are allowed" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="email" class="form-label font-weight-bold">Email:</label>
                            <input type="email" id="email" name="email" class="form-control" placeholder="Enter your email" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="phone" class="form-label font-weight-bold">Phone:</label>
                            <input type="tel" id="phone" name="phone" class="form-control" placeholder="Enter your phone number" pattern="\d{11}" minlength="11" maxlength="11" title="Enter an 11-digit phone number" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="from" class="form-label font-weight-bold">From:</label>
                            <select id="from" name="from" class="form-select" required>
                                <option value="UK">England</option>
                                <option value="Scotland">Scotland</option>
                                <option value="Wales">Wales</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="to" class="form-label font-weight-bold">To:</label>
                            <select id="to" name="to" class="form-select" onchange="updateRate()" required>
                                <option value="Lagos">Lagos</option>
                                <option value="Abuja">Abuja</option>
                                <option value="PH">Port Harcourt</option>
                                <option value="Akwa Ibom">Akwa Ibom</option>
                                <option value="Kano">Kano</option>
                                <option value="Anambra">Anambra</option>
                                <option value="Ogun">Ogun</option>
                                <option value="Imo">Imo</option>
                                <option value="Delta">Delta</option>
                                <option value="Kaduna">Kaduna</option>
                                <option value="Edo">Edo</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="length" class="form-label font-weight-bold">Length (cm):</label>
                            <input type="number" id="length" name="length" class="form-control" placeholder="Enter length" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="width" class="form-label font-weight-bold">Width (cm):</label>
                            <input type="number" id="width" name="width" class="form-control" placeholder="Enter width" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="height" class="form-label font-weight-bold">Height (cm):</label>
                            <input type="number" id="height" name="height" class="form-control" placeholder="Enter height" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="weight" class="form-label font-weight-bold">Weight (kg):</label>
                            <input type="number" id="weight" name="weight" class="form-control" placeholder="Enter weight" required>
                        </div>
                    </div>
                    <!-- Hidden Input for Final Price -->
                    <input type="hidden" id="final_price" name="final_price">
                    <button type="submit" class="btn btn-primary w-100">Calculate</button>
                </form>
                <div id="results" class="text-center mt-3 font-weight-bold text-dark">
                    <p id="cargo_weight"></p>
                    <p id="cargo_volume"></p>
                    <p id="cargo_price"></p>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Update Request Rate Button to Open Modal -->
<a href="#" class="btn border-0 px-4 py-2 line-height-9 btn-tertiary me-2 d-none" data-bs-toggle="modal" data-bs-target="#cargoCalculatorModal">
    Request Rate
</a>


<!-- Cargo Calculator JavaScript -->
<script>
    function updateRate() {
        let to = document.getElementById("to").value;
        let rates = { "Lagos": 5.60, "Abuja": 6.10, "PH": 6.00, "Akwa Ibom": 6.20, "Kano": 6.50, "Anambra": 6.10, "Ogun": 5.70, "Imo": 6.30, "Delta": 6.10, "Kaduna": 6.50, "Edo":6.00 };
        document.getElementById("to").setAttribute("data-rate", rates[to]);
    }

    function calculateCargo(event) {
    event.preventDefault(); // Prevent form submission

    // Get form values
    let length = parseFloat(document.getElementById("length").value);
    let width = parseFloat(document.getElementById("width").value);
    let height = parseFloat(document.getElementById("height").value);
    let weight = parseFloat(document.getElementById("weight").value);
    let destination = document.getElementById("to").value;

    // Calculate volume weight
    let volume = (length * width * height) / 5000;
    let chargeableWeight = Math.max(weight, volume);

    // Define price per kg based on destination
    let pricePerKg = 5.60; // Default for Lagos
    if (destination === "Abuja") {
        pricePerKg = 6.10;
    } else if (destination === "PH") {
        pricePerKg = 6.00;
    } else if (destination === "Akwa Ibom") {
        pricePerKg = 6.20;
    } else if (destination === "Kano") {
        pricePerKg = 6.50;
    } else if (destination === "Anambra") {
        pricePerKg = 6.10;
    } else if (destination === "Ogun") {
        pricePerKg = 5.70;
    } else if (destination === "Imo") {
        pricePerKg = 6.30;
    } else if (destination === "Delta") {
        pricePerKg = 6.10;
    } else if (destination === "Kaduna") {
        pricePerKg = 6.50;
    } else if (destination === "Edo") {
        pricePerKg = 6.00;
    }

    // Calculate price with handling fee
    let price = chargeableWeight * pricePerKg + 20; // Adding £20 handling fee

    // Display the results
    document.getElementById("cargo_weight").innerText = `Chargeable Weight: ${chargeableWeight.toFixed(2)} kg`;
    document.getElementById("cargo_volume").innerText = `Volume Weight: ${volume.toFixed(2)} kg`;
    document.getElementById("cargo_price").innerText = `Estimated Price: £${price.toFixed(2)} (including £20 handling fee)`;

    // Set the final price in the hidden input field for form submission
    document.getElementById("final_price").value = price.toFixed(2);

    document.addEventListener("DOMContentLoaded", updateRate);
    // Submit the form via JavaScript
    sendForm();
     }
    // Function to send form data to Basin
function sendForm() {
    let form = document.getElementById("cargoForm");
    let formData = new FormData(form);
// Ensure all form values, including final_price, are included before submission
    formData.append("final_price", document.getElementById("final_price").value);

    fetch(form.action, {
        method: "POST",
        body: formData,
        headers: { "Accept": "application/json" }
    }).then(response => {
        if (response.ok) {
            alert("Your form has been submitted successfully!");
            form.reset(); // Clear form after submission
        } else {
            alert("There was an error submitting your form. Please try again.");
        }
    }).catch(error => {
        console.error("Error submitting form:", error);
        alert("Error submitting form. Check console for details.");
    });
}
</script>
<script type="text/javascript" src="https://sandbox.web.squarecdn.com/v1/square.js"></script>

    </body>
</html>
